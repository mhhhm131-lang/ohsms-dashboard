<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="assets/css/styles.css" />
</head>
<body data-page="home">
  <header>
    <h1>ูุธุงู ุฅุฏุงุฑุฉ ุงูุณูุงูุฉ ูุงูุตุญุฉ ุงูููููุฉ โ OHSMS M.S</h1>
    <p>ุงููุงุฌูุฉ ุงูุฑุฆูุณูุฉ ูููุธุงู โ ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ</p>
  </header>
  <div class="layout">
    <aside class="sidebar">
      <h3>ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ</h3>
      <a class="nav-link" href="index.html" data-page="home">ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ</a>
      <a class="nav-link" href="dashboard.html" data-page="dashboard">ููุญุฉ ุงูุชุญูู</a>
      <a class="nav-link" href="risks.html" data-page="risks">ุฅุฏุงุฑุฉ ุงููุฎุงุทุฑ</a>
      <a class="nav-link" href="reports.html" data-page="reports">ูุธุงู ุงูุจูุงุบุงุช <span id="newReportsCount" class="badge"></span></a>
      <a class="nav-link" href="documents.html" data-page="documents">ุงููุซุงุฆู ุงูุฑูููุฉ</a>
      <a class="nav-link" href="awareness.html" data-page="awareness">ุงูุชูุนูุฉ</a>
      <a class="nav-link" href="clients.html" data-page="clients">ุงูุนููุงุก ูุงูุดุฑูุงุก</a>
      <a class="nav-link" href="admin.html" data-page="admin">ุฅุฏุงุฑุฉ ุงููุธุงู</a>
    </aside>
    <main class="content">

      <section class="card">
        <h2>๐ ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ</h2>
        <p>ูุฐุง ูู ูุฑูุฒ ุงููุธุงูุ ูููููู ุงูุชููู ุจูู ุงููุญุฏุงุช ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ.</p>

        <div class="home-grid">
          <div class="card card-soft-blue">
            <h3>๐ ุงูุณูุงุณุฉ</h3>
            <p>ุชูุชุฒู ุงูููุดุฃุฉ ุจุชุทุจูู ุฃุนูู ูุนุงููุฑ ุงูุณูุงูุฉ ูุงูุตุญุฉ ุงูููููุฉ.</p>
          </div>
          <div class="card card-soft-green">
            <h3>๐ฏ ุงูุฃูุฏุงู</h3>
            <ul class="list">
              <li>ุชูููู ุงูุญูุงุฏุซ ุงูููููุฉ.</li>
              <li>ุฑูุน ุงููุนู ุจุงูุณูุงูุฉ.</li>
              <li>ุชุญุณูู ุงูุงูุชุฒุงู.</li>
            </ul>
          </div>
          <div class="card card-soft-yellow">
            <h3>๐ ุงููุทุงู</h3>
            <p>ูุดูู ุงููุธุงู ุฌููุน ุงููุฑูุน ูุงูุฅุฏุงุฑุงุช ูุงูุฃูุดุทุฉ ุงูุชุดุบูููุฉ.</p>
          </div>
        </div>

        
        <div class="home-actions home-actions-large">
          <button class="report-btn report-btn-secret" onclick="openSecretModal()">
            ๐ ุจูุงุบ ุณุฑู
            <span>ุฅุฑุณุงู ุจูุงุบ ุณุฑู ุจุฏูู ูุดู ุงููููุฉ</span>
          </button>
          <button class="report-btn report-btn-urgent" onclick="openUrgentModal()">
            ๐จ ุจูุงุบ ุนุงุฌู
            <span>ุงุชุตุงู ุฃู ูุงุชุณุงุจ ุจุดูู ููุฑู</span>
          </button>
          <button class="report-btn report-btn-normal" onclick="openNormalModal()">
            ๐จ ุจูุงุบ ุนุงุฏู
            <span>ุชุณุฌูู ุจูุงุบ ุฑุณูู ูุน ุฅููุงููุฉ ุงูุชุชุจุน ูุงุญููุง</span>
          </button>
        </div>

      </section>

    </main>
  </div>
  

  <!-- ููุงุฐุฌ ุงูุจูุงุบุงุช (ุชุธูุฑ ูููุจูุบ ููุท ุนูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ) -->
  <div id="secretModal" class="modal-backdrop hidden">
    <div class="modal">
      <h3>๐ ูููุฐุฌ ุจูุงุบ ุณุฑู</h3>
      <p class="modal-note">ูู ูุชู ุชุณุฌูู ุฃู ุจูุงูุงุช ุชุนุฑูููุฉ ุนู ุตุงุญุจ ุงูุจูุงุบ.</p>
      <input id="home_s_type" placeholder="ููุน ุงูุฎุทุฑ" />
      <input id="home_s_cause" placeholder="ุงูุฃุณุจุงุจ" />
      <input id="home_s_damage" placeholder="ุงูุฃุถุฑุงุฑ ุงููุชููุนุฉ ุฃู ุงููุญุชููุฉ" />
      <input id="home_s_branch" placeholder="ุงููุฑุน / ุงูุฅุฏุงุฑุฉ / ุงููุณู / ุงููููุน" />
      <textarea id="home_s_reason" placeholder="ููุงุฐุง ุงุฎุชุฑุช ุฃู ูููู ุงูุจูุงุบ ุณุฑููุงุ"></textarea>
      <div class="modal-actions">
        <button class="btn-secondary" onclick="submitSecretFromHome()">ุฅุฑุณุงู ุงูุจูุงุบ</button>
        <button class="btn-ghost" onclick="closeSecretModal()">ุฅุบูุงู</button>
      </div>
    </div>
  </div>

  <div id="urgentModal" class="modal-backdrop hidden">
    <div class="modal">
      <h3>๐จ ุจูุงุบ ุนุงุฌู</h3>
      <p class="modal-note">ุงุฎุชุฑ ุทุฑููุฉ ุงูุชูุงุตู ุงูููุฑูุฉ. ุณูุชู ุชุณุฌูู ุจูุงุบ ุนุงุฌู ูู ุงููุธุงู ุจุงูุชูุงุฒู.</p>
      <div class="urgent-actions">
        <a class="btn-urgent" href="tel:0505498966" onclick="submitUrgentFromHome('call')">๐ ุงุชุตุงู ูุจุงุดุฑ</a>
        <a class="btn-urgent-alt" href="https://wa.me/966505498966" target="_blank" onclick="submitUrgentFromHome('whatsapp')">๐ฌ ูุงุชุณุงุจ ูุจุงุดุฑ</a>
      </div>
      <button class="btn-ghost" onclick="closeUrgentModal()">ุฅุบูุงู</button>
    </div>
  </div>

  <div id="normalModal" class="modal-backdrop hidden">
    <div class="modal">
      <h3>๐จ ูููุฐุฌ ุจูุงุบ ุนุงุฏู</h3>
      <p class="modal-note">ุณูุชู ูุงุญููุง ุฑุจุท ุงูุจูุงุบ ุจุญุณุงุจ ุงููุณุชุฎุฏู ุนูุฏ ุชูุนูู ูุธุงู ุงูุฏุฎูู.</p>
      <input id="home_n_type" placeholder="ููุน ุงูุฎุทุฑ" />
      <input id="home_n_location" placeholder="ูููุน ุงูุฎุทุฑ" />
      <div class="modal-actions">
        <button class="btn-secondary" onclick="submitNormalFromHome()">ุฅุฑุณุงู ุงูุจูุงุบ</button>
        <button class="btn-ghost" onclick="closeNormalModal()">ุฅุบูุงู</button>
      </div>
    </div>
  </div>

  <div id="successToast" class="success-toast hidden">
    โ ุชู ุฅุฑุณุงู ุจูุงุบู ุจูุฌุงุญ.
  </div>

  <script>
    // ูุชุญ ูุฅุบูุงู ุงูููุฏุงูุงุช ุนูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
    function openSecretModal() {
      document.getElementById('secretModal').classList.remove('hidden');
    }
    function closeSecretModal() {
      document.getElementById('secretModal').classList.add('hidden');
    }
    function openUrgentModal() {
      document.getElementById('urgentModal').classList.remove('hidden');
    }
    function closeUrgentModal() {
      document.getElementById('urgentModal').classList.add('hidden');
    }
    function openNormalModal() {
      document.getElementById('normalModal').classList.remove('hidden');
    }
    function closeNormalModal() {
      document.getElementById('normalModal').classList.add('hidden');
    }

    function showSuccessToast() {
      var toast = document.getElementById('successToast');
      toast.classList.remove('hidden');
      setTimeout(function () {
        toast.classList.add('hidden');
      }, 2500);
    }

    function generateReportId(kind) {
      var now = new Date();
      var year = now.getFullYear();
      var prefix = kind === 'secret' ? 'SE' : (kind === 'urgent' ? 'AC' : 'NO');
      var key = 'counter_' + year + '_' + prefix;
      var current = parseInt(localStorage.getItem(key) || '0', 10) + 1;
      localStorage.setItem(key, String(current));
      var counterStr = String(current).padStart(5, '0');
      return year + '-' + prefix + '-' + counterStr;
    }

    function saveReportObject(report) {
      var reports = JSON.parse(localStorage.getItem('reports') || '[]');
      reports.push(report);
      localStorage.setItem('reports', JSON.stringify(reports));
    }

    function submitSecretFromHome() {
      var report = {
        id: generateReportId('secret'),
        type: 'ุณุฑู',
        danger: document.getElementById('home_s_type').value,
        cause: document.getElementById('home_s_cause').value,
        damage: document.getElementById('home_s_damage').value,
        location: document.getElementById('home_s_branch').value,
        reasonSecret: document.getElementById('home_s_reason').value,
        createdAt: new Date().toLocaleString(),
        status: 'ุฌุฏูุฏ',
        receivedBySafety: '-'
      };
      saveReportObject(report);
      closeSecretModal();
      showSuccessToast();
    }

    function submitUrgentFromHome(channel) {
      var report = {
        id: generateReportId('urgent'),
        type: 'ุนุงุฌู',
        danger: 'ุจูุงุบ ุนุงุฌู (' + channel + ')',
        cause: '-',
        damage: '-',
        location: '-',
        createdAt: new Date().toLocaleString(),
        status: 'ุฌุฏูุฏ',
        receivedBySafety: '-'
      };
      saveReportObject(report);
      // ูุง ูุบูู ุงูููุฏุงู ููุง ูุฃู ุงูุฑุงุจุท ุณููุชูู ููููุงููุฉ / ุงููุงุชุณุงุจ
      showSuccessToast();
    }

    function submitNormalFromHome() {
      var report = {
        id: generateReportId('normal'),
        type: 'ุนุงุฏู',
        danger: document.getElementById('home_n_type').value,
        cause: '-',
        damage: '-',
        location: document.getElementById('home_n_location').value,
        createdAt: new Date().toLocaleString(),
        status: 'ุฌุฏูุฏ',
        receivedBySafety: '-'
      };
      saveReportObject(report);
      closeNormalModal();
      showSuccessToast();
    }
  </script>

  <script src="assets/js/common.js"></script>
</body>
</html>
